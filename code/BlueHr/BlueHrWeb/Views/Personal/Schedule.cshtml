@{
    ViewBag.Title = "日程安排";
}

<ol class="breadcrumb current-position" style="margin-top:10px;">
    您的位置：
    <li>个人事项</li>
    <li>日程安排</li>
</ol>

<hr class="hr-grey" />

<div id="person_calendar" style="padding: 0 20px 0 20px;"></div>

@Scripts.Render("~/bundles/fullcalendar")

<script type="text/javascript">
    Layout.init();

    $.ajax({
        url:'/Personal/AllPersonSchedule',
        type:'get',
        success:function(data){
            $('#person_calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay,listDay,listWeek,listMonth'
                },
                views: {
                    listDay: { buttonText: '天列表' },
                    listWeek: { buttonText: '周列表' },
                    listMonth: { buttonText: '月列表' }
                },
                defaultDate: new Date(),
                firstDay:1,
                locale: 'zh-cn',
                editable: true,
                timeFormat: 'H:mm',
                axisFormat: 'H:mm',
                weekNumbers: true,
                weekNumbersWithinDays: true,
                selectable: true,
                selectHelper: true,
                select: function(start, end) {
                    var title = prompt('Event Title:');
                    var eventData;
                    if (title) {
                        eventData = {
                            id: "id"+title,
                            title: title,
                            start: start,
                            end: end
                        };
                        $('#person_calendar').fullCalendar('renderEvent', eventData, true); // stick? = true
                    }
                    $('#person_calendar').fullCalendar('unselect');
                },
                eventClick: function(event, jsEvent, view) {
                    // console.log("CCCCCCCCCCCCC");
                    // console.log(event);
                    // console.log(jsEvent);
                    // console.log(view);

                    if(confirm("确认删除？")){
                        $('#person_calendar').fullCalendar('removeEvents', [event.id]);
                    }
                },
                events: data
            });
        },
        error:function (){
            console.log("Something Error!");
        }
    });

</script>